/*global console:true, window:true */

/*******************************************************
c-qwncr JavaScript Sequencing Framework
 - Jeremy Kahn    jkahn@vsapartners.com

Dependencies: none
*******************************************************/

(function(f){var b={},c,d,e;c={createLock:function(a,c){if(a)if(b[a])throw'Lock "'+a+'" already exists!';else b[a]=c?!0:!1;else throw"You need to name this lock!";return this.isLocked(a)},destroyLock:function(a){return delete b[a]},lock:function(a){if(typeof b[a]!=="boolean")throw"lock "+a+" does not exist";return b[a]=!0},unlock:function(a){if(typeof b[a]!=="boolean")throw"lock "+a+" does not exist";return b[a]=!1},isLocked:function(a){if(typeof b[a]!=="boolean")throw"lock "+a+" does not exist";
return b[a]},lockExists:function(a){return typeof b[a]!=="undefined"},_debug:function(){return b}};d={sequenceStart:function(a,b,d){if(!a)throw'cq.startSequence: "sequenceName" not provided!';c.lockExists(a)||c.createLock(a);return!c.isLocked(a)||d===!0?(c.lock(a),typeof b==="function"&&b(a),!0):!1},sequenceEnd:function(a){if(!c.lockExists(a))throw'cq.endSequence: "'+a+'" does not exist!';c.unlock(a)}};f.cq=new function(){};for(e in d)d.hasOwnProperty(e)&&(f.cq[e]=d[e])})(window);